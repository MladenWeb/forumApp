<div class="wrapper">
  <h2 style="margin-bottom: 1rem">Profile page</h2>

  <form
    style="margin-bottom: 1rem"
    [formGroup]="userForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="form-field">
      <label for="name">Name:</label>
      <input id="name" formControlName="name" />
      <div
        *ngIf="userForm.get('name')?.invalid && userForm.get('name')?.touched"
      >
        Name must have minimum 5 characters.
      </div>
    </div>

    <div class="form-field">
      <label for="email">Email:</label>
      <input id="email" formControlName="email" />
      <div
        *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched"
      >
        Enter valid email.
      </div>
    </div>

    <div class="form-field">
      <label for="password">Password:</label>
      <input type="password" id="password" formControlName="password" />
      <div
        *ngIf="
          userForm.get('password')?.invalid && userForm.get('password')?.touched
        "
      >
        Password must have minimum 8 characters, at least 1 uppercase letter, at
        least 1 lowercase letter, at least 1 digit.
      </div>
    </div>

    <div class="form-field">
      <label for="confirmPassword">Confirm password:</label>
      <input
        type="password"
        id="confirmPassword"
        formControlName="confirmPassword"
      />
      <div
        *ngIf="
          userForm.get('confirmPassword')?.invalid &&
          userForm.get('confirmPassword')?.touched
        "
      >
        Password doesn't match.
      </div>
    </div>

    <button
      style="
        padding: 10px 18px;
        display: flex;
        align-items: center;
        cursor: pointer;
      "
      type="submit"
      [disabled]="userForm.invalid"
    >
      Update
    </button>
  </form>

  <p [ngClass]="animation ? 'hideItem' : ''" style="color: green; height: 2rem">
    {{ msg }}
  </p>

  <div>
    <h3 style="margin-bottom: 1rem">Role name: {{ role["name"] }}</h3>
    <ul style="padding-left: 1rem">
      <li
        [ngClass]="{
          green: userPermissions['READ_COMMENTS'],
          red: !userPermissions['READ_COMMENTS']
        }"
      >
        Read Comments
      </li>
      <li
        [ngClass]="{
          green: userPermissions['ADD_DELETE_COMMENTS'],
          red: !userPermissions['ADD_DELETE_COMMENTS']
        }"
      >
        Add/Delete Comments
      </li>
      <li
        [ngClass]="{
          green: userPermissions['ADD_DELETE_TOPICS'],
          red: !userPermissions['ADD_DELETE_TOPICS']
        }"
      >
        Add/Delete Topics
      </li>
      <li
        [ngClass]="{
          green: userPermissions['DELETE_OTHERS_CONTENT'],
          red: !userPermissions['DELETE_OTHERS_CONTENT']
        }"
      >
        Delete Others' Comments/Topics   
      </li>
    </ul>
  </div>

  <div style="margin-top: 1rem">
    <p style="margin-bottom: 0.5rem; font-weight: bold">
      Number of comments: {{ totalComments ? totalComments : 0 }}
    </p>
    <p style="font-weight: bold">
      Number of topics: {{ topicCount ? topicCount : 0 }}
    </p>
  </div>
</div>
